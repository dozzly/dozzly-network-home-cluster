apiVersion: apps/v1
kind: Deployment
metadata:
  name: uptime-kuma
  namespace: uptime-kuma
spec:
  replicas: 1
  selector: { matchLabels: { app: uptime-kuma } }
  template:
    metadata: { labels: { app: uptime-kuma } }
    spec:
      # run only on ARM (admin VM)
      nodeSelector:
        kubernetes.io/arch: arm64
      tolerations:
      - key: "role"
        operator: "Equal"
        value: "admin"
        effect: "NoSchedule"
      containers:
      - name: uptime-kuma
        image: louislam/uptime-kuma:1
        imagePullPolicy: IfNotPresent
        ports: [ { containerPort: 3001 } ]
        volumeMounts:
        - name: data
          mountPath: /app/data
      volumes:
      - name: data
        persistentVolumeClaim:
          claimName: uptime-kuma-data
